# Example environment file (DO NOT put real secrets here)
# Copy to .env for local dev, and set real values in Railway/EAS secrets for production.

# Database
# Runtime DB connection (can be pooled/pgbouncer)
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/DB?sslmode=require

# Optional direct DB connection for Prisma migrations (recommended for Supabase)
# If set, Prisma CLI will prefer this over DATABASE_URL.
DATABASE_PRIVATE_URL=postgresql://USER:PASSWORD@HOST:5432/DB?sslmode=require

# Auth
JWT_SECRET=replace_me_with_a_long_random_string

# App/runtime
NODE_ENV=development
PORT=4000
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# Webhooks
WEBHOOK_DELIVERY_TIMEOUT_MS=5000
WEBHOOK_MAX_ATTEMPTS=5
WEBHOOK_RETRY_SECONDS=30

# Worker tuning (optional)
WEBHOOK_WORKER_POLL_MS=1000

# Job match notifications (optional)
MATCH_NOTIFY_TOP_N=25
MATCH_NOTIFY_PROVIDER_WINDOW_MINUTES=60
MATCH_NOTIFY_PROVIDER_WINDOW_MAX=5

# Provider saved searches (optional)
PROVIDER_SAVED_SEARCH_MAX=10

# Stripe
# Use test keys for local/dev, and live keys in production.
STRIPE_SECRET_KEY=sk_test_...
# (Optional on backend; required on mobile as EXPO_PUBLIC_STRIPE_PUBLISHABLE_KEY)
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Sentry (optional)
SENTRY_DSN=

# App attestation (optional)
APP_ATTESTATION_ENFORCE=false
ALLOW_UNATTESTED_DEV=true

# Optional: enforce on only one platform
# APP_ATTESTATION_PLATFORMS=android,ios

# --- Android Play Integrity (required if APP_ATTESTATION_ENFORCE=true and android is enabled) ---
ANDROID_PLAY_INTEGRITY_PACKAGE_NAME=
# Comma-separated list of base64 SHA-256 digests returned by Play Integrity.
ANDROID_PLAY_INTEGRITY_CERT_SHA256_DIGESTS=

# One of these service account options is required:
GOOGLE_SERVICE_ACCOUNT_JSON=
GOOGLE_SERVICE_ACCOUNT_JSON_B64=
GOOGLE_APPLICATION_CREDENTIALS=

# --- iOS App Attest (required if APP_ATTESTATION_ENFORCE=true and ios is enabled) ---
IOS_APP_ATTEST_BUNDLE_ID=
# Comma-separated key IDs, or '*' to allow any key ID.
IOS_APP_ATTEST_ALLOWED_KEY_IDS=*
# URL for your iOS attestation verification provider endpoint.
IOS_APP_ATTEST_VERIFY_URL=
# Optional auth header for the verification provider.
IOS_APP_ATTEST_VERIFY_AUTH_HEADER=

# Legacy JWT attestation (back-compat; only used if clients send a JWT token)
APP_ATTESTATION_JWT_ALG=RS256
APP_ATTESTATION_PUBLIC_KEY_PEM=
APP_ATTESTATION_PUBLIC_KEYS_JSON=
APP_ATTESTATION_ISSUER=
APP_ATTESTATION_AUDIENCE=

# Rate limiting (Redis)
# NOTE: required in production.
RATE_LIMIT_REDIS_URL=
RATE_LIMIT_REDIS_PREFIX=rl

# Login brute-force protection (optional tuning)
# Defaults are reasonable; override only if needed.
LOGIN_BRUTE_FORCE_WINDOW_MS=
LOGIN_BRUTE_FORCE_COOLDOWN_MS=
LOGIN_BRUTE_FORCE_MAX_FAILS_IP=
LOGIN_BRUTE_FORCE_MAX_FAILS_EMAIL=

# Attachments / object storage (recommended; required in production unless escape hatch)
OBJECT_STORAGE_PROVIDER=s3
OBJECT_STORAGE_ALLOW_DISK_IN_PROD=false
ATTACHMENTS_SIGNED_URL_TTL_SECONDS=300

OBJECT_STORAGE_S3_BUCKET=
OBJECT_STORAGE_S3_REGION=
OBJECT_STORAGE_S3_ACCESS_KEY_ID=
OBJECT_STORAGE_S3_SECRET_ACCESS_KEY=

# Optional (S3-compatible providers like Cloudflare R2)
OBJECT_STORAGE_S3_ENDPOINT=
OBJECT_STORAGE_S3_FORCE_PATH_STYLE=false
